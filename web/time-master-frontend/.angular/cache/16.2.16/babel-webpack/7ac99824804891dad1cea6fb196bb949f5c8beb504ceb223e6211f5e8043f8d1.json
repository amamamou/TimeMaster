{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { Validators } from '@angular/forms'; // Importations pour le formulaire\nexport let TeachersComponent = class TeachersComponent {\n  constructor(teachersService, fb // Utilisation de FormBuilder pour créer des formulaires réactifs\n  ) {\n    this.teachersService = teachersService;\n    this.fb = fb;\n    this.teachers = [];\n    this.isEditing = false; // Pour activer le mode édition\n    this.currentTeacherId = null; // Pour garder le professeur en cours d'édition\n    this.selectedTeacher = null;\n    // Initialisation du formulaire avec les attributs corrects\n    this.editTeacherForm = this.fb.group({\n      name: ['', Validators.required],\n      maxDaysPerWeek: [null, Validators.required],\n      maxHoursPerDay: [null, Validators.required],\n      maxGapsPerDay: [null, Validators.required],\n      subjectSpecialization: ['', Validators.required],\n      assignedActivities: ['', Validators.required] // Assuming a string input for simplicity\n    });\n  }\n\n  ngOnInit() {\n    this.getTeachers();\n  }\n  getTeachers() {\n    this.teachersService.getAllTeachers().subscribe(data => {\n      this.teachers = data;\n    });\n  }\n  deleteTeacher(id) {\n    this.teachersService.deleteTeacher(id).subscribe(() => {\n      console.log('Teacher deleted successfully');\n      this.teachers = this.teachers.filter(teacher => teacher.teacherID !== id);\n    }, error => {\n      console.log('Error deleting teacher', error);\n    });\n  }\n  // Démarrer l'édition d'un professeur\n  startEditing(teacher) {\n    this.isEditing = true; // Active le mode édition\n    this.currentTeacherId = teacher.teacherID; // Stocke l'ID du professeur à éditer\n    // Remplir le formulaire avec les informations du professeur\n    this.editTeacherForm.patchValue({\n      name: teacher.username,\n      maxDaysPerWeek: teacher.maxDaysPerWeek,\n      maxHoursPerDay: teacher.maxHoursPerDay,\n      maxGapsPerDay: teacher.maxGapsPerDay,\n      subjectSpecialization: teacher.subjectSpecialization.join(', '),\n      assignedActivities: teacher.assignedActivities.join(', ') // Assuming comma-separated values for display\n    });\n  }\n  // Annuler l'édition\n  cancelEditing() {\n    this.isEditing = false; // Désactive le mode édition\n    this.currentTeacherId = null;\n  }\n  // Enregistrer les modifications\n  updateTeacher() {\n    if (this.editTeacherForm.valid && this.currentTeacherId !== null) {\n      this.teachersService.updateTeacher(this.currentTeacherId, this.editTeacherForm.value).subscribe(() => {\n        console.log('Teacher updated successfully');\n        this.getTeachers(); // Recharge la liste des professeurs après la mise à jour\n        this.isEditing = false;\n        this.currentTeacherId = null;\n      }, error => {\n        console.log('Error updating teacher', error);\n      });\n    }\n  }\n  getTeacherDetails(id) {\n    this.teachersService.getTeacherById(id).subscribe(teacher => {\n      this.selectedTeacher = teacher; // Stocker les détails du professeur sélectionné\n    }, error => {\n      console.log('Error fetching teacher details', error);\n    });\n  }\n  // Pour masquer les détails\n  clearSelectedTeacher() {\n    this.selectedTeacher = null;\n  }\n};\nTeachersComponent = __decorate([Component({\n  selector: 'app-teachers',\n  templateUrl: './teachers.component.html',\n  styleUrls: ['./teachers.component.css']\n})], TeachersComponent);","map":{"version":3,"names":["Component","Validators","TeachersComponent","constructor","teachersService","fb","teachers","isEditing","currentTeacherId","selectedTeacher","editTeacherForm","group","name","required","maxDaysPerWeek","maxHoursPerDay","maxGapsPerDay","subjectSpecialization","assignedActivities","ngOnInit","getTeachers","getAllTeachers","subscribe","data","deleteTeacher","id","console","log","filter","teacher","teacherID","error","startEditing","patchValue","username","join","cancelEditing","updateTeacher","valid","value","getTeacherDetails","getTeacherById","clearSelectedTeacher","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\Users\\DELL\\Desktop\\TimeMaster\\web\\time-master-frontend\\src\\app\\admin\\teachers\\teachers.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms'; // Importations pour le formulaire\nimport { Teacher } from 'src/app/models/teacher.model';\nimport { TeachersService } from 'src/app/services/teachers.service';\n\n@Component({\n  selector: 'app-teachers',\n  templateUrl: './teachers.component.html',\n  styleUrls: ['./teachers.component.css']\n})\nexport class TeachersComponent implements OnInit {\n  teachers: Teacher[] = [];\n  isEditing: boolean = false;  // Pour activer le mode édition\n  currentTeacherId: number | null = null;  // Pour garder le professeur en cours d'édition\n  editTeacherForm: FormGroup;  // Formulaire d'édition\n  selectedTeacher: Teacher | null = null;\n  \n  constructor(\n    private teachersService: TeachersService,\n    private fb: FormBuilder // Utilisation de FormBuilder pour créer des formulaires réactifs\n  ) {\n    // Initialisation du formulaire avec les attributs corrects\n    this.editTeacherForm = this.fb.group({\n      name: ['', Validators.required],\n      maxDaysPerWeek: [null, Validators.required],\n      maxHoursPerDay: [null, Validators.required],\n      maxGapsPerDay: [null, Validators.required],\n      subjectSpecialization: ['', Validators.required], // Assuming a string input for simplicity\n      assignedActivities: ['', Validators.required]     // Assuming a string input for simplicity\n    });\n  }\n\n  ngOnInit(): void {\n    this.getTeachers();\n  }\n\n  getTeachers(): void {\n    this.teachersService.getAllTeachers().subscribe((data: Teacher[]) => {\n      this.teachers = data;\n    });\n  }\n\n  deleteTeacher(id: number): void {\n    this.teachersService.deleteTeacher(id).subscribe(\n      () => {\n        console.log('Teacher deleted successfully');\n        this.teachers = this.teachers.filter(teacher => teacher.teacherID !== id);\n      },\n      error => {\n        console.log('Error deleting teacher', error);\n      }\n    );\n  }\n\n  // Démarrer l'édition d'un professeur\n  startEditing(teacher: Teacher): void {\n    this.isEditing = true;  // Active le mode édition\n    this.currentTeacherId = teacher.teacherID;  // Stocke l'ID du professeur à éditer\n\n    // Remplir le formulaire avec les informations du professeur\n    this.editTeacherForm.patchValue({\n      name: teacher.username,\n      maxDaysPerWeek: teacher.maxDaysPerWeek,\n      maxHoursPerDay: teacher.maxHoursPerDay,\n      maxGapsPerDay: teacher.maxGapsPerDay,\n      subjectSpecialization: teacher.subjectSpecialization.join(', '), // Assuming comma-separated values for display\n      assignedActivities: teacher.assignedActivities.join(', ')        // Assuming comma-separated values for display\n    });\n  }\n\n  // Annuler l'édition\n  cancelEditing(): void {\n    this.isEditing = false;  // Désactive le mode édition\n    this.currentTeacherId = null;\n  }\n\n  // Enregistrer les modifications\n  updateTeacher(): void {\n    if (this.editTeacherForm.valid && this.currentTeacherId !== null) {\n      this.teachersService.updateTeacher(this.currentTeacherId, this.editTeacherForm.value).subscribe(\n        () => {\n          console.log('Teacher updated successfully');\n          this.getTeachers();  // Recharge la liste des professeurs après la mise à jour\n          this.isEditing = false;\n          this.currentTeacherId = null;\n        },\n        error => {\n          console.log('Error updating teacher', error);\n        }\n      );\n    }\n  }\n\n  getTeacherDetails(id: number): void {\n    this.teachersService.getTeacherById(id).subscribe(\n      (teacher: Teacher) => {\n        this.selectedTeacher = teacher; // Stocker les détails du professeur sélectionné\n      },\n      (error) => {\n        console.log('Error fetching teacher details', error);\n      }\n    );\n  }\n\n  // Pour masquer les détails\n  clearSelectedTeacher(): void {\n    this.selectedTeacher = null;\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}